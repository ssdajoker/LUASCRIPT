{
  "name": "transpiler.js",
  "path": "src/transpiler.js",
  "sha": "6257bbf498ce2872523e9ccfc8233cd9449cf3e9",
  "size": 6971,
  "url": "https://api.github.com/repos/ssdajoker/LUASCRIPT/contents/src/transpiler.js?ref=fix/runtime-compat-phase1B",
  "html_url": "https://github.com/ssdajoker/LUASCRIPT/blob/fix/runtime-compat-phase1B/src/transpiler.js",
  "git_url": "https://api.github.com/repos/ssdajoker/LUASCRIPT/git/blobs/6257bbf498ce2872523e9ccfc8233cd9449cf3e9",
  "download_url": "https://raw.githubusercontent.com/ssdajoker/LUASCRIPT/fix/runtime-compat-phase1B/src/transpiler.js",
  "type": "file",
  "content": "Ci8qKgogKiBMVUFTQ1JJUFQgVHJhbnNwaWxlciAtIEphdmFTY3JpcHQgdG8g\nTHVhIFRyYW5zcGlsZXIKICogUGhhc2UgMUI6IFJ1bnRpbWUgQ29tcGF0aWJp\nbGl0eSBGaXhlcwogKiAKICogQ3JpdGljYWwgZml4ZXMgaW1wbGVtZW50ZWQ6\nCiAqIC0gU3RyaW5nIGNvbmNhdGVuYXRpb246IEphdmFTY3JpcHQgJysnIHRv\nIEx1YSAnLi4nCiAqIC0gTG9naWNhbCBvcGVyYXRvcnM6ICd8fCcgdG8gJ29y\nJywgJz09PScgdG8gJz09JwogKiAtIFJ1bnRpbWUgbGlicmFyeSBpbnRlZ3Jh\ndGlvbiBmb3IgY29uc29sZS5sb2cgYW5kIG90aGVyIEpTIGZ1bmN0aW9ucwog\nKi8KCmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTsKY29uc3QgcGF0aCA9IHJl\ncXVpcmUoJ3BhdGgnKTsKCmNsYXNzIEx1YVNjcmlwdFRyYW5zcGlsZXIgewog\nICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgdGhpcy5ydW50aW1lTGlicmFy\neVBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAncnVudGltZScs\nICdydW50aW1lLmx1YScpOwogICAgfQoKICAgIC8qKgogICAgICogTWFpbiB0\ncmFuc3BpbGF0aW9uIGZ1bmN0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ30g\nanNDb2RlIC0gSmF2YVNjcmlwdCBjb2RlIHRvIHRyYW5zcGlsZQogICAgICog\nQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBUcmFuc3BpbGF0aW9uIG9wdGlv\nbnMKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVHJhbnNwaWxlZCBMdWEg\nY29kZQogICAgICovCiAgICB0cmFuc3BpbGUoanNDb2RlLCBvcHRpb25zID0g\ne30pIHsKICAgICAgICBsZXQgbHVhQ29kZSA9IGpzQ29kZTsKCiAgICAgICAg\nLy8gUGhhc2UgMUIgQ3JpdGljYWwgRml4ZXMgLSBPcmRlciBtYXR0ZXJzIQog\nICAgICAgIGx1YUNvZGUgPSB0aGlzLmZpeEVxdWFsaXR5T3BlcmF0b3JzKGx1\nYUNvZGUpOwogICAgICAgIGx1YUNvZGUgPSB0aGlzLmZpeExvZ2ljYWxPcGVy\nYXRvcnMobHVhQ29kZSk7CiAgICAgICAgbHVhQ29kZSA9IHRoaXMuZml4U3Ry\naW5nQ29uY2F0ZW5hdGlvbihsdWFDb2RlKTsKICAgICAgICBsdWFDb2RlID0g\ndGhpcy5pbmplY3RSdW50aW1lTGlicmFyeShsdWFDb2RlLCBvcHRpb25zKTsK\nCiAgICAgICAgLy8gQWRkaXRpb25hbCBKYXZhU2NyaXB0IHRvIEx1YSBjb252\nZXJzaW9ucwogICAgICAgIGx1YUNvZGUgPSB0aGlzLmNvbnZlcnRWYXJpYWJs\nZURlY2xhcmF0aW9ucyhsdWFDb2RlKTsKICAgICAgICBsdWFDb2RlID0gdGhp\ncy5jb252ZXJ0RnVuY3Rpb25EZWNsYXJhdGlvbnMobHVhQ29kZSk7CiAgICAg\nICAgbHVhQ29kZSA9IHRoaXMuY29udmVydENvbmRpdGlvbmFscyhsdWFDb2Rl\nKTsKICAgICAgICBsdWFDb2RlID0gdGhpcy5jb252ZXJ0TG9vcHMobHVhQ29k\nZSk7CiAgICAgICAgbHVhQ29kZSA9IHRoaXMuY29udmVydEFycmF5cyhsdWFD\nb2RlKTsKICAgICAgICBsdWFDb2RlID0gdGhpcy5jb252ZXJ0T2JqZWN0cyhs\ndWFDb2RlKTsKCiAgICAgICAgcmV0dXJuIGx1YUNvZGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBGaXggc3RyaW5nIGNvbmNhdGVuYXRpb24gb3BlcmF0b3I6\nICsgdG8gLi4KICAgICAqIENyaXRpY2FsIFBoYXNlIDFCIGZpeAogICAgICov\nCiAgICBmaXhTdHJpbmdDb25jYXRlbmF0aW9uKGNvZGUpIHsKICAgICAgICAv\nLyBIYW5kbGUgc3RyaW5nIGNvbmNhdGVuYXRpb24gd2l0aCBwcm9wZXIgY29u\ndGV4dCBkZXRlY3Rpb24KICAgICAgICAvLyBUaGlzIHJlZ2V4IGxvb2tzIGZv\nciArIG9wZXJhdG9ycyB0aGF0IGFyZSBsaWtlbHkgc3RyaW5nIGNvbmNhdGVu\nYXRpb24KICAgICAgICAvLyBQYXR0ZXJuOiBzdHJpbmcvdmFyaWFibGUgKyBz\ndHJpbmcvdmFyaWFibGUgKGluY2x1ZGluZyBzdHJpbmdzIHdpdGggc3BlY2lh\nbCBjaGFycykKICAgICAgICAKICAgICAgICAvLyBGaXJzdCBwYXNzOiBoYW5k\nbGUgc2ltcGxlIGNvbmNhdGVuYXRpb24KICAgICAgICBsZXQgcmVzdWx0ID0g\nY29kZS5yZXBsYWNlKAogICAgICAgICAgICAvKFx3K3wiW14iXSoifCdbXidd\nKicpXHMqXCtccyooXHcrfCJbXiJdKiJ8J1teJ10qJykvZywKICAgICAgICAg\nICAgJyQxIC4uICQyJwogICAgICAgICk7CiAgICAgICAgCiAgICAgICAgLy8g\nU2Vjb25kIHBhc3M6IGhhbmRsZSBjaGFpbmVkIGNvbmNhdGVuYXRpb24KICAg\nICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgKICAgICAgICAgICAgLyhc\ndyt8IlteIl0qInwnW14nXSonKShccypcLlwuXHMqKFx3K3wiW14iXSoifCdb\nXiddKicpKStccypcK1xzKihcdyt8IlteIl0qInwnW14nXSonKS9nLAogICAg\nICAgICAgICAnJDEkMiAuLiAkNCcKICAgICAgICApOwogICAgICAgIAogICAg\nICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaXgg\nbG9naWNhbCBvcGVyYXRvcnM6IHx8IHRvIG9yLCAmJiB0byBhbmQKICAgICAq\nIENyaXRpY2FsIFBoYXNlIDFCIGZpeAogICAgICovCiAgICBmaXhMb2dpY2Fs\nT3BlcmF0b3JzKGNvZGUpIHsKICAgICAgICByZXR1cm4gY29kZQogICAgICAg\nICAgICAucmVwbGFjZSgvXHxcfC9nLCAnb3InKQogICAgICAgICAgICAucmVw\nbGFjZSgvJiYvZywgJ2FuZCcpCiAgICAgICAgICAgIC5yZXBsYWNlKC8hXHMq\nKFthLXpBLVpfJF1bYS16QS1aMC05XyRdKnxcKFteKV0qXCkpL2csICdub3Qg\nJDEnKTsKICAgIH0KCiAgICAvKioKICAgICAqIEZpeCBlcXVhbGl0eSBvcGVy\nYXRvcnM6ID09PSB0byA9PSwgIT09IHRvIH49CiAgICAgKiBDcml0aWNhbCBQ\naGFzZSAxQiBmaXgKICAgICAqLwogICAgZml4RXF1YWxpdHlPcGVyYXRvcnMo\nY29kZSkgewogICAgICAgIHJldHVybiBjb2RlCiAgICAgICAgICAgIC5yZXBs\nYWNlKC8hPT0vZywgJ349JykKICAgICAgICAgICAgLnJlcGxhY2UoLyE9L2cs\nICd+PScpCiAgICAgICAgICAgIC5yZXBsYWNlKC89PT0vZywgJz09Jyk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBJbmplY3QgcnVudGltZSBsaWJyYXJ5IGZv\nciBjb25zb2xlLmxvZyBhbmQgb3RoZXIgSlMgZnVuY3Rpb25zCiAgICAgKiBD\ncml0aWNhbCBQaGFzZSAxQiBmaXgKICAgICAqLwogICAgaW5qZWN0UnVudGlt\nZUxpYnJhcnkoY29kZSwgb3B0aW9ucyA9IHt9KSB7CiAgICAgICAgY29uc3Qg\ncmVxdWlyZVJ1bnRpbWUgPSBvcHRpb25zLmluY2x1ZGVSdW50aW1lICE9PSBm\nYWxzZTsKICAgICAgICAKICAgICAgICBpZiAocmVxdWlyZVJ1bnRpbWUpIHsK\nICAgICAgICAgICAgY29uc3QgcnVudGltZVJlcXVpcmUgPSBgLS0gTFVBU0NS\nSVBUIFJ1bnRpbWUgTGlicmFyeSBJbnRlZ3JhdGlvbgpsb2NhbCBydW50aW1l\nID0gcmVxdWlyZSgncnVudGltZS5ydW50aW1lJykKbG9jYWwgY29uc29sZSA9\nIHJ1bnRpbWUuY29uc29sZQpsb2NhbCBKU09OID0gcnVudGltZS5KU09OCmxv\nY2FsIE1hdGggPSBydW50aW1lLk1hdGgKCmA7CiAgICAgICAgICAgIHJldHVy\nbiBydW50aW1lUmVxdWlyZSArIGNvZGU7CiAgICAgICAgfQogICAgICAgIAog\nICAgICAgIHJldHVybiBjb2RlOwogICAgfQoKICAgIC8qKgogICAgICogQ29u\ndmVydCBKYXZhU2NyaXB0IHZhcmlhYmxlIGRlY2xhcmF0aW9ucyB0byBMdWEK\nICAgICAqLwogICAgY29udmVydFZhcmlhYmxlRGVjbGFyYXRpb25zKGNvZGUp\nIHsKICAgICAgICByZXR1cm4gY29kZQogICAgICAgICAgICAucmVwbGFjZSgv\nXGJ2YXJccysoXHcrKS9nLCAnbG9jYWwgJDEnKQogICAgICAgICAgICAucmVw\nbGFjZSgvXGJsZXRccysoXHcrKS9nLCAnbG9jYWwgJDEnKQogICAgICAgICAg\nICAucmVwbGFjZSgvXGJjb25zdFxzKyhcdyspL2csICdsb2NhbCAkMScpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCBKYXZhU2NyaXB0IGZ1bmN0\naW9uIGRlY2xhcmF0aW9ucyB0byBMdWEKICAgICAqLwogICAgY29udmVydEZ1\nbmN0aW9uRGVjbGFyYXRpb25zKGNvZGUpIHsKICAgICAgICAvLyBDb252ZXJ0\nIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucwogICAgICAgIGNvZGUgPSBjb2RlLnJl\ncGxhY2UoCiAgICAgICAgICAgIC9mdW5jdGlvblxzKyhcdyspXHMqXCgoW14p\nXSopXClccyp7L2csCiAgICAgICAgICAgICdsb2NhbCBmdW5jdGlvbiAkMSgk\nMiknCiAgICAgICAgKTsKCiAgICAgICAgLy8gQ29udmVydCBhcnJvdyBmdW5j\ndGlvbnMgKGJhc2ljIHN1cHBvcnQpCiAgICAgICAgY29kZSA9IGNvZGUucmVw\nbGFjZSgKICAgICAgICAgICAgLyhcdyspXHMqPVxzKlwoKFteKV0qKVwpXHMq\nPT5ccyp7L2csCiAgICAgICAgICAgICdsb2NhbCBmdW5jdGlvbiAkMSgkMikn\nCiAgICAgICAgKTsKCiAgICAgICAgLy8gQ29udmVydCBjbG9zaW5nIGJyYWNl\ncyB0byBlbmQKICAgICAgICBjb2RlID0gY29kZS5yZXBsYWNlKC99L2csICdl\nbmQnKTsKCiAgICAgICAgcmV0dXJuIGNvZGU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb252ZXJ0IEphdmFTY3JpcHQgY29uZGl0aW9uYWxzIHRvIEx1YQog\nICAgICovCiAgICBjb252ZXJ0Q29uZGl0aW9uYWxzKGNvZGUpIHsKICAgICAg\nICByZXR1cm4gY29kZQogICAgICAgICAgICAucmVwbGFjZSgvaWZccypcKC9n\nLCAnaWYgJykKICAgICAgICAgICAgLnJlcGxhY2UoL1wpXHMqey9nLCAnIHRo\nZW4nKQogICAgICAgICAgICAucmVwbGFjZSgvZWxzZVxzKnsvZywgJ2Vsc2Un\nKQogICAgICAgICAgICAucmVwbGFjZSgvZWxzZVxzK2lmXHMqXCgvZywgJ2Vs\nc2VpZiAnKQogICAgICAgICAgICAucmVwbGFjZSgvXClccyp7L2csICcgdGhl\nbicpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCBKYXZhU2NyaXB0\nIGxvb3BzIHRvIEx1YQogICAgICovCiAgICBjb252ZXJ0TG9vcHMoY29kZSkg\newogICAgICAgIC8vIENvbnZlcnQgd2hpbGUgbG9vcHMKICAgICAgICBjb2Rl\nID0gY29kZS5yZXBsYWNlKC93aGlsZVxzKlwoL2csICd3aGlsZSAnKS5yZXBs\nYWNlKC9cKVxzKnsvZywgJyBkbycpOwogICAgICAgIAogICAgICAgIC8vIENv\nbnZlcnQgZm9yIGxvb3BzIChiYXNpYyBudW1lcmljIGZvcikKICAgICAgICBj\nb2RlID0gY29kZS5yZXBsYWNlKAogICAgICAgICAgICAvZm9yXHMqXChccyoo\nXHcrKVxzKj1ccyooXGQrKVxzKjtccypcMVxzKjxccyooXGQrKVxzKjtccypc\nMVwrXCtccypcKVxzKnsvZywKICAgICAgICAgICAgJ2ZvciAkMSA9ICQyLCAk\nMyAtIDEgZG8nCiAgICAgICAgKTsKCiAgICAgICAgcmV0dXJuIGNvZGU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IEphdmFTY3JpcHQgYXJyYXlz\nIHRvIEx1YSB0YWJsZXMKICAgICAqLwogICAgY29udmVydEFycmF5cyhjb2Rl\nKSB7CiAgICAgICAgLy8gQ29udmVydCBhcnJheSBsaXRlcmFscwogICAgICAg\nIHJldHVybiBjb2RlLnJlcGxhY2UoL1xbKFteXF1dKilcXS9nLCAneyQxfScp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCBKYXZhU2NyaXB0IG9i\namVjdHMgdG8gTHVhIHRhYmxlcwogICAgICovCiAgICBjb252ZXJ0T2JqZWN0\ncyhjb2RlKSB7CiAgICAgICAgLy8gQmFzaWMgb2JqZWN0IGxpdGVyYWwgY29u\ndmVyc2lvbgogICAgICAgIHJldHVybiBjb2RlLnJlcGxhY2UoLyhcdyspOlxz\nKihbXix9XSspL2csICckMSA9ICQyJyk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBUcmFuc3BpbGUgYSBmaWxlCiAgICAgKi8KICAgIHRyYW5zcGlsZUZpbGUo\naW5wdXRQYXRoLCBvdXRwdXRQYXRoLCBvcHRpb25zID0ge30pIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBjb25zdCBqc0NvZGUgPSBmcy5yZWFkRmls\nZVN5bmMoaW5wdXRQYXRoLCAndXRmOCcpOwogICAgICAgICAgICBjb25zdCBs\ndWFDb2RlID0gdGhpcy50cmFuc3BpbGUoanNDb2RlLCBvcHRpb25zKTsKICAg\nICAgICAgICAgCiAgICAgICAgICAgIGlmIChvdXRwdXRQYXRoKSB7CiAgICAg\nICAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKG91dHB1dFBhdGgsIGx1YUNv\nZGUsICd1dGY4Jyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVHJh\nbnNwaWxlZCAke2lucHV0UGF0aH0gLT4gJHtvdXRwdXRQYXRofWApOwogICAg\nICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gbHVh\nQ29kZTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBj\nb25zb2xlLmVycm9yKGBFcnJvciB0cmFuc3BpbGluZyAke2lucHV0UGF0aH06\nYCwgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgIHRocm93IGVycm9yOwog\nICAgICAgIH0KICAgIH0KfQoKLy8gQ0xJIGludGVyZmFjZQppZiAocmVxdWly\nZS5tYWluID09PSBtb2R1bGUpIHsKICAgIGNvbnN0IGFyZ3MgPSBwcm9jZXNz\nLmFyZ3Yuc2xpY2UoMik7CiAgICAKICAgIGlmIChhcmdzLmxlbmd0aCA8IDEp\nIHsKICAgICAgICBjb25zb2xlLmxvZygnVXNhZ2U6IG5vZGUgdHJhbnNwaWxl\nci5qcyA8aW5wdXQuanM+IFtvdXRwdXQubHVhXSBbb3B0aW9uc10nKTsKICAg\nICAgICBjb25zb2xlLmxvZygnT3B0aW9uczonKTsKICAgICAgICBjb25zb2xl\nLmxvZygnICAtLW5vLXJ1bnRpbWUgICAgU2tpcCBydW50aW1lIGxpYnJhcnkg\naW5qZWN0aW9uJyk7CiAgICAgICAgcHJvY2Vzcy5leGl0KDEpOwogICAgfQoK\nICAgIGNvbnN0IGlucHV0RmlsZSA9IGFyZ3NbMF07CiAgICBjb25zdCBvdXRw\ndXRGaWxlID0gYXJnc1sxXSB8fCBpbnB1dEZpbGUucmVwbGFjZSgvXC5qcyQv\nLCAnLmx1YScpOwogICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgICBpbmNs\ndWRlUnVudGltZTogIWFyZ3MuaW5jbHVkZXMoJy0tbm8tcnVudGltZScpCiAg\nICB9OwoKICAgIGNvbnN0IHRyYW5zcGlsZXIgPSBuZXcgTHVhU2NyaXB0VHJh\nbnNwaWxlcigpOwogICAgCiAgICB0cnkgewogICAgICAgIHRyYW5zcGlsZXIu\ndHJhbnNwaWxlRmlsZShpbnB1dEZpbGUsIG91dHB1dEZpbGUsIG9wdGlvbnMp\nOwogICAgICAgIGNvbnNvbGUubG9nKCdUcmFuc3BpbGF0aW9uIGNvbXBsZXRl\nZCBzdWNjZXNzZnVsbHkhJyk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAg\nICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zcGlsYXRpb24gZmFpbGVkOicsIGVy\ncm9yLm1lc3NhZ2UpOwogICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgIH0K\nfQoKbW9kdWxlLmV4cG9ydHMgPSBMdWFTY3JpcHRUcmFuc3BpbGVyOwo=\n",
  "encoding": "base64",
  "_links": {
    "self": "https://api.github.com/repos/ssdajoker/LUASCRIPT/contents/src/transpiler.js?ref=fix/runtime-compat-phase1B",
    "git": "https://api.github.com/repos/ssdajoker/LUASCRIPT/git/blobs/6257bbf498ce2872523e9ccfc8233cd9449cf3e9",
    "html": "https://github.com/ssdajoker/LUASCRIPT/blob/fix/runtime-compat-phase1B/src/transpiler.js"
  }
}
